#define macros
DIR_TOOLS = Tools
DIR_KICKASS = $(DIR_TOOLS)\KickAss
KICKASS = Java -jar $(DIR_KICKASS)\KickAss.jar
DIR_B2A = $(DIR_TOOLS)\Bin2Array
B2A = $(DIR_B2A)\Bin2Array.exe
DIR_ZIP = $(DIR_TOOLS)\Zip
ZIP = $(DIR_ZIP)\zip.exe -j -X
STRIPZIP = $(DIR_ZIP)\stripzip.exe
CFLAGS = -O3 -Wall -std=c++17 -fexceptions -O2 -std=c++17 -c

Sparkle.exe: obj\Release\Sparkle.o obj\Release\Packer.o obj\Release\Ascii2DirArt.o obj\Release\Petscii2DirArt.o obj\Release\Loader.o obj\Release\SD.o obj\Release\SS.o obj\Release\SSIO.o
	g++.exe  -o Sparkle.exe obj\Release\Ascii2DirArt.o obj\Release\Loader.o obj\Release\Packer.o obj\Release\Petscii2DirArt.o obj\Release\SD.o obj\Release\Sparkle.o obj\Release\SS.o obj\Release\SSIO.o obj\Release\Sparkle.res -s

obj\Release\Sparkle.o: Sparkle.cpp Common.h
	g++.exe -O3 -Wall -std=c++17 -fexceptions -c Sparkle.cpp -o obj\Release\Sparkle.o

obj\Release\Packer.o: Packer.cpp Common.h
	g++.exe -O3 -Wall -std=c++17 -fexceptions  -c Packer.cpp -o obj\Release\Packer.o

obj\Release\Ascii2DirArt.o: Ascii2DirArt.cpp Common.h
	g++.exe -O3 -Wall -std=c++17 -fexceptions  -c Ascii2DirArt.cpp -o obj\Release\Ascii2DirArt.o

obj\Release\Loader.o: Loader.cpp Common.h
	g++.exe -O3 -Wall -std=c++17 -fexceptions  -c Loader.cpp -o obj\Release\Loader.o

obj\Release\Petscii2DirArt.o: Petscii2DirArt.cpp Common.h
	g++.exe -O3 -Wall -std=c++17 -fexceptions  -c Petscii2DirArt.cpp -o obj\Release\Petscii2DirArt.o

obj\Release\SD.o: SD.cpp Common.h
	g++.exe -O3 -Wall -std=c++17 -fexceptions  -c SD.cpp -o obj\Release\SD.o

obj\Release\SS.o: SS.cpp Common.h
	g++.exe -O3 -Wall -std=c++17 -fexceptions  -c SS.cpp -o obj\Release\SS.o

obj\Release\SSIO.o: SSIO.cpp Common.h
	g++.exe -O3 -Wall -std=c++17 -fexceptions  -c SSIO.cpp -o obj\Release\SSIO.o

Ascii2DirArt.cpp: Resources\Ascii2DirArt.bin Resources\Petscii2DirArt.bin Resources\Loader.prg
	$(B2A) Resources\Ascii2DirArt.bin 0 0 Ascii2DirArt.cpp

Petscii2DirArt.cpp: Resources\Petscii2DirArt.bin
	$(B2A) Resources\Petscii2DirArt.bin 0 0 Petscii2DirArt.cpp

Loader.cpp: Resources\Loader.prg
	$(B2A) Resources\Loader.prg 0 0 Loader.cpp

Resources\Loader.prg: Resources\SL.asm
	$(KICKASS) Resources\SL.asm -o Resources\Loader.prg -afo

SD.cpp: Resources\SD.prg
	$(B2A) Resources\SD.prg 2 0 SD.cpp

Resources\SD.prg: Resources\SD.asm
	$(KICKASS) Resources\SD.asm -o Resources\SD.prg

SS.cpp: Resources\SS.prg
	$(B2A) Resources\SS.prg 2 0 SS.cpp

Resources\SS.prg: Resources\SS.asm
	$(KICKASS) Resources\SS.asm -o Resources\SS.prg  :io=false

SSIO.cpp: Resources\SSIO.prg
	$(B2A) Resources\SSIO.prg 2 0 SSIO.cpp

Resources\SSIO.prg: Resources\SS.asm
	$(KICKASS) Resources\SS.asm -o Resources\SSIO.prg  :io=true